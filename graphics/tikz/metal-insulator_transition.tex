%! TeX root = ../../main.tex

\begin{tikzpicture}
    \begin{groupplot}[
            group style={
                    group size=2 by 1,
                    horizontal sep=18mm,
                },
            width=7.5cm,
            cycle multiindex* list={
                    Set1\nextlist%
                    mark list*\nextlist
                },
            xmin=2.35,
            xmax=3.45,
            xtick distance=0.2,
            yticklabel style={
                    /pgf/number format/fixed,
                },
        ]

        \nextgroupplot [
            ymin=0,
            title=double occupation,
            xlabel=$U/D$,
            ylabel=$\langle n_\uparrow n_\downarrow\rangle$,
            ytick distance=0.02,
            scaled y ticks=false,
            unbounded coords=discard,
        ]
        \addplot [color=gray, mark=*] table [x=U, y=D_NRG_met] {data/D.csv};
        \addplot [color=gray, mark=*, forget plot] table [x=U, y=D_NRG_ins] {data/D.csv};
        \addplot [color=gray, mark=none, dashed, forget plot] coordinates {
                (2.8,0.0255)
                (2.95,0.016)
            };
        \addplot [color=gray, mark=none, dashed, forget plot] coordinates {
                (2.37,0.056)
                (2.37,0.0275)
            };
        \pgfplotsset{cycle list shift=-1}
        % \addplot+ table [x=U, y=D_L1_p1_lin] {data/D.csv};
        % \addplot+ table [x=U, y=D_L1_p1_log] {data/D.csv};
        % \addplot+ table [x=U, y=D_L2_p1_lin] {data/D.csv};
        % \addplot+ table [x=U, y=D_L2_p1_log] {data/D.csv};
        \addplot+ table [x=U, y=D_L1_p2_lin] {data/D.csv};
        \addplot+ table [x=U, y=D_L1_p2_log] {data/D.csv};
        \addplot+ table [x=U, y=D_L2_p2_lin] {data/D.csv};

        \nextgroupplot [
            ymin=0,
            title=quasiparticle weight,
            xlabel=$U/D$,
            ylabel=$Z$,
            ytick distance=0.04,
            legend entries=
                {
                    NRG,
                    {$L=1$, $p=2$, lin.},
                    {$L=1$, $p=2$, log.},
                    {$L=2$, $p=2$, lin.},
                },
            legend cell align=left,
        ]
        \addplot [color=gray, mark=*] table [x=U, y=Z_NRG] {data/Z.csv};
        \addplot [color=gray, mark=*, dashed, forget plot] coordinates {
                (2.8,0.0252)
                (2.95,0.0)
            };
        \pgfplotsset{cycle list shift=-1}
        % \addplot+ table [x=U, y=Z_L1_p1_lin] {data/Z.csv};
        % \addplot+ table [x=U, y=Z_L1_p1_log] {data/Z.csv};
        % \addplot+ table [x=U, y=Z_L2_p1_lin] {data/Z.csv};
        % \addplot+ table [x=U, y=Z_L2_p1_log] {data/Z.csv};
        \addplot+ table [x=U, y=Z_L1_p2_lin] {data/Z.csv};
        \addplot+ table [x=U, y=Z_L1_p2_log] {data/Z.csv};
        \addplot+ table [x=U, y=Z_L2_p2_lin] {data/Z.csv};

    \end{groupplot}
\end{tikzpicture}
