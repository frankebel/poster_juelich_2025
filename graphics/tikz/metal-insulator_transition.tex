%! TeX root = ../../main.tex

\begin{tikzpicture}
    \begin{groupplot}
        [
            group style=
                {
                    group size=2 by 1,
                    horizontal sep=4cm,
                },
            width=12cm,
            cycle multiindex* list={
                    Set1\nextlist%
                    mark list*\nextlist
                },
        ]

        \nextgroupplot
        [
            xmin=2.0,
            xmax=3.6,
            ymin=0,
            title=double occupation,
            xlabel=$U/D$,
            ylabel=$\langle n_\uparrow n_\downarrow\rangle$,
            xtick distance=0.4,
            ytick distance=0.02,
            scaled y ticks=false,
            yticklabel style={
                    /pgf/number format/fixed,
                },
            unbounded coords=discard,
        ]
        \addplot [color=gray, mark=*] table [x=U, y=D_NRG_met] {data/D.csv};
        \addplot [color=gray, mark=*, forget plot] table [x=U, y=D_NRG_ins] {data/D.csv};
        \pgfplotsset{cycle list shift=-1}
        % \addplot+ table [x=U, y=D_L1_p1_lin] {data/D.csv};
        % \addplot+ table [x=U, y=D_L1_p1_log] {data/D.csv};
        % \addplot+ table [x=U, y=D_L2_p1_lin] {data/D.csv};
        % \addplot+ table [x=U, y=D_L2_p1_log] {data/D.csv};
        \addplot+ table [x=U, y=D_L1_p2_lin] {data/D.csv};
        \addplot+ table [x=U, y=D_L1_p2_log] {data/D.csv};
        \addplot+ table [x=U, y=D_L2_p2_lin] {data/D.csv};

        \nextgroupplot
        [
            xmin=2.0,
            xmax=3.6,
            ymin=0,
            ymax=0.3,
            title=quasiparticle weight,
            xlabel=$U/D$,
            ylabel=$Z$,
            xtick distance=0.4,
            ytick distance=0.1,
            legend entries=
                {
                    NRG,
                    {$L=1$, $p=2$, lin.},
                    {$L=1$, $p=2$, log.},
                    {$L=2$, $p=2$, lin.},
                },
            legend cell align=left,
        ]
        \addplot [color=gray, mark=*] table [x=U, y=Z_NRG] {data/Z.csv};
        \pgfplotsset{cycle list shift=-1}
        % \addplot+ table [x=U, y=Z_L1_p1_lin] {data/Z.csv};
        % \addplot+ table [x=U, y=Z_L1_p1_log] {data/Z.csv};
        % \addplot+ table [x=U, y=Z_L2_p1_lin] {data/Z.csv};
        % \addplot+ table [x=U, y=Z_L2_p1_log] {data/Z.csv};
        \addplot+ table [x=U, y=Z_L1_p2_lin] {data/Z.csv};
        \addplot+ table [x=U, y=Z_L1_p2_log] {data/Z.csv};
        \addplot+ table [x=U, y=Z_L2_p2_lin] {data/Z.csv};

    \end{groupplot}
\end{tikzpicture}
